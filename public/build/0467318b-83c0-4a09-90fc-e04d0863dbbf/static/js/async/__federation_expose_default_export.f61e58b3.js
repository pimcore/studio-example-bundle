/*! For license information please see __federation_expose_default_export.f61e58b3.js.LICENSE.txt */
"use strict";(self.webpackChunkpimcore_studio_example_bundle=self.webpackChunkpimcore_studio_example_bundle||[]).push([["249"],{251:function(e,t,n){var i=n(136),o=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,r={},c=null,d=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,i)&&!s.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===r[i]&&(r[i]=t[i]);return{$$typeof:o,type:e,key:c,ref:d,props:r,_owner:l.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},893:function(e,t,n){e.exports=n(251)},839:function(e,t,n){n.r(t),n.d(t,{AssetEditorToolbarButtonPlugin:()=>v,CustomIconPlugin:()=>T,TabManagerPlugin:()=>j,ApiDataPlugin:()=>G,ListingPlugin:()=>es,CustomWidgetsPlugin:()=>L,MainNavEntryPlugin:()=>g,DataObjectContextMenuPlugin:()=>U,DynamicTypePlugin:()=>F});var i=n(723),o=n(236),r=n(893),a=n(136),l=n.n(a),s=n(907);let c=()=>(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"Example Tool"}),(0,r.jsx)(s.Alert,{message:"Just a quick demo how to open main widgets from the main navigation menu."})]}),d={onInit:()=>{let e=i.container.get(o.serviceIds.mainNavRegistry);e.registerMainNavItem({path:"Example Plugin",icon:"pimcore"}),e.registerMainNavItem({path:"Example Plugin/Example Tool",widgetConfig:{name:"Example Tool",id:"example-tool",component:"example-tool",config:{icon:{type:"name",value:"pimcore"}}}}),i.container.get(o.serviceIds.widgetManager).registerWidget({name:"example-tool",component:c})}},g={name:"MainNavEntryPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(d)}};var m=n(122),p=n(190);let u=()=>{let e=(0,s.useAlertModal)(),{id:t}=(0,a.useContext)(p.AssetContext),{asset:n}=(0,p.useAssetDraft)(t);return(0,r.jsx)(r.Fragment,{children:(null==n?void 0:n.type)==="image"&&(0,r.jsx)(s.Button,{onClick:()=>{e.info({title:"Hello!",content:"Hello from the custom toolbar button! The button will only be shown for image assets. Have a nice day!"})},children:"Custom Image Button"})})},x={onInit:()=>{i.container.get(o.serviceIds["App/ComponentRegistry/ComponentRegistry"]).registerToSlot(m.componentConfig.asset.editor.toolbar.slots.left.name,{name:"customToolbarButton",component:u,priority:500})}},v={name:"AssetEditorToolbarButtonPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(x)}},f=()=>(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"Example Tab"}),"This is an example tab."]}),y={onInit(){i.container.get(o.serviceIds["Asset/Editor/FolderTabManager"]).register({key:"example-folder-tab",label:"Example Folder Tab",icon:(0,r.jsx)(s.Icon,{value:"pimcore"}),children:(0,r.jsx)(f,{})})}},b=()=>(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"New preview tab"}),(0,r.jsx)(s.Alert,{message:(0,r.jsxs)("div",{children:["This is a new preview tab.",(0,r.jsx)("br",{}),"It replaces the default preview tab."]}),type:"info"})]}),h={onInit(){let e=i.container.get(o.serviceIds["DataObject/Editor/ObjectTabManager"]),t=e.getTab("preview");if(void 0===t)throw Error("Preview tab not found");e.register({...t,children:(0,r.jsx)(b,{})})}},j={name:"TabManagerPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(y),t.registerModule(h)}},C=()=>(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"Custom Icons"}),(0,r.jsx)(s.Card,{children:(0,r.jsxs)(s.Flex,{align:"center",gap:"small",children:[(0,r.jsx)("h1",{children:"Icon Example"}),(0,r.jsx)(s.Icon,{options:{height:35,width:35,style:{rotate:"90deg"}},value:"rocket-example"})]})}),(0,r.jsxs)(s.Space,{direction:"vertical",size:"small",children:[(0,r.jsx)(s.IconButton,{icon:{value:"rocket-example"},size:"large",type:"default"}),(0,r.jsx)(s.IconTextButton,{icon:{value:"rocket-example"},children:"Rocket"}),(0,r.jsx)(s.IconTextButton,{icon:{value:"rocket-example"},type:"primary",children:"Rocket"})]})]}),w=e=>(0,r.jsx)("svg",{viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,r.jsx)("path",{d:"M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z",fill:"currentColor"})}),I={onInit(){i.container.get(o.serviceIds.iconLibrary).register({name:"rocket-example",component:w}),i.container.get(o.serviceIds.mainNavRegistry).registerMainNavItem({path:"Example Plugin/Custom Icons",widgetConfig:{name:"Custom Icons",id:"custom-icon",component:"custom-icons",config:{icon:{type:"name",value:"rocket-example"}}}}),i.container.get(o.serviceIds.widgetManager).registerWidget({name:"custom-icons",component:C})}},T={name:"CustomIconPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(I)}};var M=n(292);let P=()=>{let e=(0,M.useWidgetManager)(),[t,n]=l().useState(void 0),[i,o]=l().useState(void 0),a=void 0===i,c=[{name:"Example widget",component:"example-widget",config:{icon:{type:"name",value:"pimcore"}}},{name:"Example widget with fixed id",id:"example-widget-fixed-id",component:"example-widget",config:{icon:{type:"name",value:"pimcore"}}},{name:"Another example widget",component:"another-example-widget",config:{icon:{type:"name",value:"pimcore"}}}],d=c.map(e=>({label:e.name,value:e.name}));return(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"Example widget"}),(0,r.jsx)("div",{children:"Select a widget:"}),(0,r.jsx)(s.Select,{minWidth:"normal",onChange:e=>{n(e),o(c.find(t=>t.name===e))},options:d,value:t}),void 0!==i&&(0,r.jsxs)(s.Space,{direction:"vertical",size:"small",children:[(0,r.jsx)(s.Button,{disabled:a,onClick:()=>{e.openMainWidget(i)},children:"Open main widget"}),(0,r.jsx)(s.Button,{disabled:a,onClick:()=>{e.openLeftWidget(i)},children:"Open left widget"}),(0,r.jsx)(s.Button,{disabled:a,onClick:()=>{e.openRightWidget(i)},children:"Open right widget"}),(0,r.jsx)(s.Button,{disabled:a,onClick:()=>{e.openBottomWidget(i)},children:"Open bottom widget"})]})]})},S=()=>(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"Another example widget"}),(0,r.jsx)("div",{children:"This is another example widget."})]}),E={onInit:()=>{i.container.get(o.serviceIds.mainNavRegistry).registerMainNavItem({path:"Example Plugin/Custom Widgets",widgetConfig:{name:"Custom Widgets",id:"custom-widgets",component:"example-widget",config:{icon:{type:"name",value:"pimcore"}}}});let e=i.container.get(o.serviceIds.widgetManager);e.registerWidget({name:"example-widget",component:P}),e.registerWidget({name:"another-example-widget",component:S})}},L={name:"CustomWidgetsPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(E)}},D=[{id:"number-cell",accessorFn:e=>e["number-cell"],accessorKey:"number-cell",header:"Number",meta:{type:"number"}},{id:"text-cell",accessorFn:e=>e["text-cell"],accessorKey:"text-cell",header:"Text",meta:{type:"text"}},{id:"boolean-cell",accessorFn:e=>e["boolean-cell"],accessorKey:"boolean-cell",header:"Boolean",meta:{type:"boolean",editable:!1}},{id:"live-updating",accessorFn:e=>e["live-updating"],accessorKey:"live-updating",header:"Live Updating",meta:{type:"live-updating"}}],A=[{"number-cell":1,"text-cell":"Hello","live-updating":"2234","boolean-cell":!0},{"number-cell":2,"text-cell":"World","live-updating":"543","boolean-cell":!1},{"number-cell":3,"text-cell":"!","live-updating":"234","boolean-cell":!0}],O=()=>(0,r.jsx)(s.Grid,{columns:D,data:A}),R=()=>(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"Dynamic types"}),(0,r.jsx)(O,{})]}),k={onInit:()=>{i.container.get(o.serviceIds.mainNavRegistry).registerMainNavItem({path:"Example Plugin/Dynamic Types",widgetConfig:{name:"Dynamic Types",id:"dynamic-types",component:"dynamic-types",config:{icon:{type:"name",value:"pimcore"}}}}),i.container.get(o.serviceIds.widgetManager).registerWidget({name:"dynamic-types",component:R}),i.container.get(o.serviceIds["DynamicTypes/GridCellRegistry"]).registerDynamicType(i.container.get("DynamicTypes/GridCell/LiveUpdatingCell"))}};var N=n(96);let B=e=>{let{getValue:t}=e,[n,i]=(0,a.useState)(0);return(0,a.useEffect)(()=>{let e=setInterval(()=>{i(Math.floor(1e3*Math.random()))},2e3);return()=>{clearInterval(e)}},[]),(0,r.jsx)("div",{className:"default-cell__content",children:n})};class _ extends N.DynamicTypeGridCellAbstract{getGridCellComponent(e){return(0,r.jsx)(B,{...e})}constructor(...e){super(...e),this.id="live-updating"}}_=function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}([(0,o.injectable)()],_);let F={name:"DynamicTypePlugin",onInit(e){let{container:t}=e;t.bind("DynamicTypes/GridCell/LiveUpdatingCell").to(_)},onStartup(e){let{moduleSystem:t}=e;t.registerModule(k)}};var W=n(47);let H=()=>{let{isLoading:e,data:t,isError:n,error:i}=(0,W.useAssetGetTreeQuery)({page:1,pageSize:10});return(0,a.useEffect)(()=>{n&&(0,m.trackError)(new m.ApiError(i))},[n]),(0,r.jsxs)(s.Content,{loading:e,padded:!0,children:[(0,r.jsx)(s.Header,{title:"API data"}),null==t?void 0:t.items.map(e=>(0,r.jsx)("div",{children:e.filename},e.id))]})},q={onInit(){i.container.get(o.serviceIds.mainNavRegistry).registerMainNavItem({path:"Example Plugin/Api Data",widgetConfig:{name:"Api Data",id:"api-data",component:"api-data-widget",config:{icon:{type:"name",value:"pimcore"}}}}),i.container.get(o.serviceIds.widgetManager).registerWidget({name:"api-data-widget",component:H})}},G={name:"ApiDataPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(q)}},z={onInit(){let e=i.container.get(o.serviceIds["App/ContextMenuRegistry/ContextMenuRegistry"]),t=m.contextMenuConfig.dataObjectTree;e.registerToSlot(t.name,{name:"custom-item",priority:t.priority.rename-1,useMenuItem:e=>{let t=(0,s.useAlertModal)();return{key:"custom-item",label:"Custom Item",icon:(0,r.jsx)(s.Icon,{value:"pimcore"}),onClick:()=>{t.info({title:`Custom item clicked for data object with id: ${e.target.id}`,content:"This is a custom context menu item for the data object."})}}}}),e.updateSlotProvider(t.name,"delete",e=>({...e,useMenuItem:t=>{let n=e.useMenuItem(t);return null===n||"folder"!==t.target.type?null:{...n,label:"Customized Delete (visible only for folders)",icon:(0,r.jsx)(s.Icon,{subIconName:"pimcore",value:"trash"})}}}))}},U={name:"DataObjectContextMenuPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(z)}};var K=n(395);let Q=()=>{let e=i.container.get("Cars/Listing/Builder");return(0,r.jsx)(K.DataObjectProvider,{id:1,children:(0,r.jsx)(K.BaseListing,{...e.build({props:{...K.listingDefaultProps,toolbarSlotName:"carsListing.toolbar"},config:{tagFilter:{enabled:!1}}})})})},V=()=>(0,r.jsx)(Q,{}),Y=(0,a.createContext)(void 0),$=e=>{let{children:t}=e,[n,i]=(0,a.useState)(null);return(0,a.useMemo)(()=>(0,r.jsx)(Y.Provider,{value:{pqlFilter:n,setPqlFilter:i},children:t}),[n,t])},J=()=>{let e=(0,a.useContext)(Y);if(void 0===e)throw Error("usePqlFilterContext must be used within a PqlFilterProvider");return e},X=e=>()=>(0,r.jsx)($,{children:(0,r.jsx)(e,{})}),Z=()=>{let{pqlFilter:e,setPqlFilter:t}=J(),n=[{label:"All E-Type models which are green or produced before 1965.",pql:'series = "E-Type" AND (color = "green" OR productionYear < 1965)'},{label:"All Alfa cars produced after 1965",pql:'manufacturer:Manufacturer.name = "Alfa" AND productionYear > 1965'},{label:"All red or blue cars using standard PQL syntax.",pql:'color = "red" OR color = "blue"'}].map(e=>({label:e.label,value:e.pql}));return(0,r.jsx)(s.ContentLayout,{children:(0,r.jsxs)(s.Content,{padded:!0,children:[(0,r.jsx)(s.Header,{title:"Predefined PQL Filter"}),(0,r.jsx)(s.Select,{allowClear:!0,className:"w-full",onChange:t,options:n,value:e})]})})},ee=e=>()=>{let{getProps:t}=e();return{getProps:()=>{let e=t();return e.entries.unshift({key:"pql-filter",component:(0,r.jsx)(Z,{}),icon:(0,r.jsx)(s.Icon,{value:"pimcore"})}),e}}},et=e=>()=>{let{getArgs:t,...n}=e(),{pqlFilter:i}=J();return{...n,getArgs:()=>{var e,n,o;let r=t();return{...r,body:{...r.body,filters:{...null==(e=r.body)?void 0:e.filters,columnFilters:[...(null==(o=r.body)||null==(n=o.filters)?void 0:n.columnFilters)??[],...null!==i?[{type:"system.pql",locale:null,filterValue:i}]:[]]}}}}}},en=e=>{let{useSidebarOptions:t,ContextComponent:n,useDataQueryHelper:i}=e;return{...e,ContextComponent:X(n),useSidebarOptions:ee(t),useDataQueryHelper:et(i)}},ei=e=>t=>(0,r.jsx)(s.ContentLayout,{renderTopBar:(0,r.jsx)(s.Toolbar,{position:"top",theme:"secondary",children:(0,r.jsx)(s.Header,{title:"Cars"})}),children:(0,r.jsx)(e,{})}),eo=e=>{let{ViewComponent:t}=e;return{...e,ViewComponent:ei(t)}},er=()=>(0,r.jsxs)(s.Toolbar,{theme:"secondary",children:[(0,r.jsx)(s.Flex,{gap:"small",children:(0,r.jsx)(m.SlotRenderer,{slot:"carsListing.toolbar.left"})}),(0,r.jsx)(s.Flex,{gap:"small",children:(0,r.jsx)(m.SlotRenderer,{slot:"carsListing.toolbar.right"})})]}),ea=()=>(0,r.jsx)(s.Button,{children:"Injected Plugin Button"}),el={onInit:()=>{let e=i.container.get(o.serviceIds.mainNavRegistry);e.registerMainNavItem({path:"Example Plugin",icon:"pimcore"}),e.registerMainNavItem({path:"Example Plugin/Listing Examples/Cars Listing",widgetConfig:{name:"Cars",id:"cars-listing",component:"cars-listing",config:{icon:{type:"name",value:"car"}}}}),i.container.get(o.serviceIds.widgetManager).registerWidget({name:"cars-listing",component:V}),i.container.bind("Cars/Listing/Builder").toConstantValue(i.container.get("DataObject/Listing/Builder").copy());let t=i.container.get("Cars/Listing/Builder");t.addDecorator({name:"pql-filter",decorator:en}),t.addDecorator({name:"header",decorator:eo}),t.removeDecorator("generalFilters");let n=t.getDecorator("classDefinitionSelection");if(void 0!==n){let e={...n.config,classRestriction:[{classes:"Car"}]};t.overrideDecorator({name:"classDefinitionSelection",config:e})}let r=i.container.get(o.serviceIds["App/ComponentRegistry/ComponentRegistry"]);r.registerConfig({carsListing:{toolbar:{component:{name:"carsListing.toolbar",type:m.ComponentType.SINGLE},left:{type:m.ComponentType.SLOT,name:"carsListing.toolbar.left"},right:{type:m.ComponentType.SLOT,name:"carsListing.toolbar.right"}}}}),r.register({name:"carsListing.toolbar",component:er});let a=r.getSlotComponents(m.componentConfig.dataObject.listing.toolbar.left.name),l=r.getSlotComponents(m.componentConfig.dataObject.listing.toolbar.right.name);for(let e of a)r.registerToSlot("carsListing.toolbar.left",e);for(let e of(r.registerToSlot("carsListing.toolbar.right",{name:"extraButton",component:ea}),l))r.registerToSlot("carsListing.toolbar.right",e);r.getSlotComponents("carsListing.toolbar.left")}},es={name:"ListingPlugin",onStartup(e){let{moduleSystem:t}=e;t.registerModule(el)}}}}]);